#!/bin/sh

# Profile file. Runs on login.

#export WINDOW_MANAGER='i3'
#export WINDOW_MANAGER='sway'
export WINDOW_MANAGER='bspwm'
#export WINDOW_MANAGER='emacs'
#export WINDOW_MANAGER='gnome-session'
export TERM='screen-256color'
export EDITOR='edit'
export VISUAL="$EDITOR"
export TERMINAL='theterm'
export FILE_MANAGER='fmz'
export BROWSER='browser'
export READER='reader'
export MENUS_INTERFACE='dmenu'
export TUI_APPS='music-player:lf:vis:corona:alsamixer:lyrics:nano:dice:fmz'

# TODO: move to personal
export BIB="$HOME/Documents/LaTeX/refs.bib"
export ORG_TODO="$HOME/Dropbox/orgmode/TODO.org"
export CLOUDCONVERT_API_KEY='bUGujVfvGQ6nkPZo5MvFoIz65C3spOZMtiD4Bz613XxnXsUIVDDwZILqOJZghP3D'

export FONT_MONO='Iosevka Fixed'
export FONT_SANS='Liberation Sans'
export FONT="$FONT_MONO"
export GTK_THEME="Adwaita:dark"
export DESKTOP_SESSION=gnome
export QT_QPA_PLATFORMTHEME="qt5ct"
#export QT_DEVICE_PIXEL_RATIO=1
export QT_AUTO_SCREEN_SCALE_FACTOR=0
#export QT_STYLE_OVERRIDE=adwaita-dark
export SHHH_JAVA_OPTIONS='-Dawt.useSystemAAFontSettings=on' # check bashrc
export NEWT_COLORS='root=,black'
export CM_LAUNCHER=menus-face # for clipmenu
#export LESS="$LESS --mouse -K"

export PI=3.14159265358979323844
export EU=2.71828182845904523537

[ -f ~/.dotfiles-exports ] &&
    . ~/.dotfiles-exports
export TINY=$(ndots istiny && echo t)

try_export() {   [ -d "$2" ] && export "$1=$2";:;       }
try_add_path() { [ -d "$1" ] && export PATH="$PATH:$1";:; }
test -f "$DOTFILES_DIR/configs/more-paths.sh" &&
    . "$DOTFILES_DIR/configs/more-paths.sh"

# Workaround to not run those in Ubuntu
if ! command -v apt >/dev/null; then

    # To be able to change the brightness. Password is not required as edited in the sudoers
    sudo chmod a+rw /sys/class/backlight/intel_backlight/brightness \
         2>/dev/null ||:

    # Start graphical server if i3 not already running.
    if [ "$(tty)" = "/dev/tty1" ]; then
        pgrep -x "$WINDOW_MANAGER" || exec startx
    fi

fi
