#!/bin/sh
[ "$OPENER" = '' ] && OPENER=xdg-open
[ "$#" = 0 ] && {
    $EDITOR
    exit 0
}
for f in "$@"; do
    # if no such file
    [ ! -e "$f" ] && {
        $EDITOR "$f"
        exit 0
    }
    # file name
    case "$f" in
        *.html)
            browser "$f" >/dev/null 2>/dev/null &;;
        *)
            # mime type
            case $(file --mime-type "$(realpath """$f""")" -b) in
                text/*|*/json|*empty)
                    $EDITOR "$f";;
                image/*)
                    sxivv "$f" >/dev/null 2>/dev/null &;;
                video/*)
                    mpv "$f" --loop=inf >/dev/null 2>/dev/null &;;
                audio/*)
                    music-play "$f";;
                *)
                    $OPENER "$f" &
            esac
    esac
done
